{
  "$schema": "Schemas/JSON/HttpLogging-Schema.json#",
  "NLog": {
    "throwConfigExceptions": true,
    "targets": {
      "async": true,
      "console": {
        "type": "Console"
      },
      "file": {
        "type": "File",
        "fileName": "Logs\\NLog.log",
        "ArchiveFileName": "Logs\\NLog-{#}.zip",
        "ArchiveDateFormat": "yyyy-MM-dd",
        "ArchiveNumbering": "Date",
        "CreateDirs": true,
        "MaxArchiveFiles": 10,
        "KeepFileOpen": false,
        "EnableArchiveFileCompression": true,
        "EnableFileDelete": true,
        "ArchiveEvery": "Day",
        "Layout": "${longdate}|${level:uppercase=true}|${aspnet-request-headers:headerNames=X-Correlation-Id:ValuesOnly=true:whenEmpty=00000000-0000-0000-0000-000000000000}|${logger}|${message}"
      },
      "ExceptionMiddlewareLogs": {
        "type": "File",
        "fileName": "Logs\\NLog-MiddlewareException.log",
        "ArchiveFileName": "Logs\\NLog-MiddlewareException-{#}.zip",
        "ArchiveDateFormat": "yyyy-MM-dd",
        "ArchiveNumbering": "Date",
        "CreateDirs": true,
        "MaxArchiveFiles": 10,
        "KeepFileOpen": false,
        "EnableArchiveFileCompression": true,
        "EnableFileDelete": true,
        "ArchiveEvery": "Day",
        "Layout": "${longdate}|${level:uppercase=true}|${aspnet-request-headers:headerNames=X-Correlation-Id:ValuesOnly=true:whenEmpty=00000000-0000-0000-0000-000000000000}|${logger}|${message}"
      },
      "HttpLoggingMiddlewareLogs": {
        "type": "File",
        "fileName": "Logs\\NLog-RequestResponse.log",
        "ArchiveFileName": "Logs\\NLog-RequestResponse-{#}.zip",
        "ArchiveDateFormat": "yyyy-MM-dd",
        "ArchiveNumbering": "Date",
        "CreateDirs": true,
        "MaxArchiveFiles": 10,
        "KeepFileOpen": false,
        "EnableArchiveFileCompression": true,
        "EnableFileDelete": true,
        "ArchiveEvery": "Day",
        "Layout": "${longdate}|${level:uppercase=true}|${aspnet-request-headers:headerNames=X-Correlation-Id:ValuesOnly=true:whenEmpty=00000000-0000-0000-0000-000000000000}|${logger}|${message}"
      }
    },
    "rules": [
      {
        "logger": "*",
        "minLevel": "Debug",
        "writeTo": "console"
      },
      {
        "logger": "Secura.Infrastructure.Core.WebApi.Middleware.UnhandledExceptionMiddleware",
        "minLevel": "Info",
        "final": true,
        "writeTo": "ExceptionMiddlewareLogs"
      },
      {
        "logger": "Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware",
        "minLevel": "Info",
        "final": true,
        "writeTo": "HttpLoggingMiddlewareLogs"
      },
      {
        "logger": "*",
        "minLevel": "Info",
        "writeTo": "file"
      }
    ]
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware": "Information"
    }
  },
  "HttpLogging": {
    "Request": {
      "Path": true,
      "Body": true,
      "Method": true,
      "Query": true,
      "Headers": true
    },
    "Response": {
      "Body": true,
      "StatusCode": true,
      "Headers": true,
      "DefaultContentTypes": false,
      "ContentTypes": [
        {
          "ContentType": "application/json",
          "Encoding": "utf-8"
        },
        {
          "ContentType": "text/plain",
          "Encoding": "utf-8"
        }
      ]
    },
    //Default request headers: https://github.com/dotnet/aspnetcore/blob/b923cf8ff9c1cd9d380dfcceaf66f87c9ee667dd/src/Middleware/HttpLogging/src/HttpLoggingOptions.cs#L32
    //Default response headers: https://github.com/dotnet/aspnetcore/blob/b923cf8ff9c1cd9d380dfcceaf66f87c9ee667dd/src/Middleware/HttpLogging/src/HttpLoggingOptions.cs#L71
    "ShowDefaultHeaders": true,
    "RequestHeaders": [
    ],
    "ResponseHeaders": [
    ],
    "MaxLogBodySize": 32
  },
  "ErrorHandling": {
    "MailHeader": "(Local) TestPipelineV5 Unhandled Exception",
    "MailServer": "emailserver",
    "MailFrom": "Local TestPipelineV5 <noreply@secura.net>",
    "MailTo": "",
    "SendEmail": true,
    "SendZipped": false,
    "SaveLocally": true,
    "SaveLocallyPath": "C:\\Temp\\TestPipelineV5\\Emails",
    "DefaultErrorResponse": "An unhandled exception has occurred. Please see the logs for more details."
  },
  "AllowedHosts": "*",
  "Database": {
    "DatabaseConnection1": "Server=(local);Initial Catalog=Test-Database;Integrated Security=true;"
  },
  "BasicAuthentication": {
    "Token": "",
    "HashType": "SHA512"
  }
}
